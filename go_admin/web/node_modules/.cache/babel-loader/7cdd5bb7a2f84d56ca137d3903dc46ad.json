{"remainingRequest":"E:\\BaiduNetdiskDownload\\gin-vue-admin\\web\\node_modules\\_babel-loader@8.2.2@babel-loader\\lib\\index.js!E:\\BaiduNetdiskDownload\\gin-vue-admin\\web\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js??ref--0-0!E:\\BaiduNetdiskDownload\\gin-vue-admin\\web\\node_modules\\_vue-loader@15.9.6@vue-loader\\lib\\index.js??vue-loader-options!E:\\BaiduNetdiskDownload\\gin-vue-admin\\web\\src\\view\\superAdmin\\authority\\components\\datas.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\BaiduNetdiskDownload\\gin-vue-admin\\web\\src\\view\\superAdmin\\authority\\components\\datas.vue","mtime":1618795335792},{"path":"E:\\BaiduNetdiskDownload\\gin-vue-admin\\web\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\BaiduNetdiskDownload\\gin-vue-admin\\web\\node_modules\\_babel-loader@8.2.2@babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\BaiduNetdiskDownload\\gin-vue-admin\\web\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\BaiduNetdiskDownload\\gin-vue-admin\\web\\node_modules\\_vue-loader@15.9.6@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkU6L0JhaWR1TmV0ZGlza0Rvd25sb2FkL2dpbi12dWUtYWRtaW4vd2ViL25vZGVfbW9kdWxlcy9fQGJhYmVsX3J1bnRpbWVANy4xMy4xMEBAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJFOi9CYWlkdU5ldGRpc2tEb3dubG9hZC9naW4tdnVlLWFkbWluL3dlYi9ub2RlX21vZHVsZXMvX0BiYWJlbF9ydW50aW1lQDcuMTMuMTBAQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IHNldERhdGFBdXRob3JpdHkgfSBmcm9tICdAL2FwaS9hdXRob3JpdHknOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0RhdGFzJywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYXV0aG9yaXR5czogW10sCiAgICAgIGRhdGFBdXRob3JpdHlJZDogW10sCiAgICAgIG5lZWRDb25maXJtOiBmYWxzZQogICAgfTsKICB9LAogIHByb3BzOiB7CiAgICByb3c6IHsKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIHt9OwogICAgICB9LAogICAgICB0eXBlOiBPYmplY3QKICAgIH0sCiAgICBhdXRob3JpdHk6IHsKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIHt9OwogICAgICB9LAogICAgICB0eXBlOiBBcnJheQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLy8g5pq06Zyy57uZ5aSW5bGC5L2/55So55qE5YiH5o2i5oum5oiq57uf5LiA5pa55rOVCiAgICBlbnRlckFuZE5leHQ6IGZ1bmN0aW9uIGVudGVyQW5kTmV4dCgpIHsKICAgICAgdGhpcy5hdXRoRGF0YUVudGVyKCk7CiAgICB9LAogICAgYWxsOiBmdW5jdGlvbiBhbGwoKSB7CiAgICAgIHRoaXMuZGF0YUF1dGhvcml0eUlkID0gX3RvQ29uc3VtYWJsZUFycmF5KHRoaXMuYXV0aG9yaXR5cyk7CiAgICAgIHRoaXMucm93LmRhdGFBdXRob3JpdHlJZCA9IHRoaXMuZGF0YUF1dGhvcml0eUlkOwogICAgICB0aGlzLm5lZWRDb25maXJtID0gdHJ1ZTsKICAgIH0sCiAgICBzZWxmOiBmdW5jdGlvbiBzZWxmKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy5kYXRhQXV0aG9yaXR5SWQgPSB0aGlzLmF1dGhvcml0eXMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIGl0ZW0uYXV0aG9yaXR5SWQgPT09IF90aGlzLnJvdy5hdXRob3JpdHlJZDsKICAgICAgfSk7CiAgICAgIHRoaXMucm93LmRhdGFBdXRob3JpdHlJZCA9IHRoaXMuZGF0YUF1dGhvcml0eUlkOwogICAgICB0aGlzLm5lZWRDb25maXJtID0gdHJ1ZTsKICAgIH0sCiAgICBzZWxmQW5kQ2hpbGRyZW46IGZ1bmN0aW9uIHNlbGZBbmRDaGlsZHJlbigpIHsKICAgICAgdmFyIGFyckJveCA9IFtdOwogICAgICB0aGlzLmdldENoaWxkcmVuSWQodGhpcy5yb3csIGFyckJveCk7CiAgICAgIHRoaXMuZGF0YUF1dGhvcml0eUlkID0gdGhpcy5hdXRob3JpdHlzLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBhcnJCb3guaW5kZXhPZihpdGVtLmF1dGhvcml0eUlkKSA+IC0xOwogICAgICB9KTsKICAgICAgdGhpcy5yb3cuZGF0YUF1dGhvcml0eUlkID0gdGhpcy5kYXRhQXV0aG9yaXR5SWQ7CiAgICAgIHRoaXMubmVlZENvbmZpcm0gPSB0cnVlOwogICAgfSwKICAgIGdldENoaWxkcmVuSWQ6IGZ1bmN0aW9uIGdldENoaWxkcmVuSWQocm93LCBhcnJCb3gpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBhcnJCb3gucHVzaChyb3cuYXV0aG9yaXR5SWQpOwogICAgICByb3cuY2hpbGRyZW4gJiYgcm93LmNoaWxkcmVuLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIF90aGlzMi5nZXRDaGlsZHJlbklkKGl0ZW0sIGFyckJveCk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOaPkOS6pAogICAgYXV0aERhdGFFbnRlcjogZnVuY3Rpb24gYXV0aERhdGFFbnRlcigpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciByZXM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gc2V0RGF0YUF1dGhvcml0eShfdGhpczMucm93KTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAocmVzLmNvZGUgPT0gMCkgewogICAgICAgICAgICAgICAgICBfdGhpczMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAi6LWE5rqQ6K6+572u5oiQ5YqfIgogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIC8vICAg5bmz6ZO66KeS6ImyCiAgICByb3VuZEF1dGhvcml0eTogZnVuY3Rpb24gcm91bmRBdXRob3JpdHkoYXV0aG9yaXR5cykgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIGF1dGhvcml0eXMgJiYgYXV0aG9yaXR5cy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICB2YXIgb2JqID0ge307CiAgICAgICAgb2JqLmF1dGhvcml0eUlkID0gaXRlbS5hdXRob3JpdHlJZDsKICAgICAgICBvYmouYXV0aG9yaXR5TmFtZSA9IGl0ZW0uYXV0aG9yaXR5TmFtZTsKCiAgICAgICAgX3RoaXM0LmF1dGhvcml0eXMucHVzaChvYmopOwoKICAgICAgICBpZiAoaXRlbS5jaGlsZHJlbiAmJiBpdGVtLmNoaWxkcmVuLmxlbmd0aCkgewogICAgICAgICAgX3RoaXM0LnJvdW5kQXV0aG9yaXR5KGl0ZW0uY2hpbGRyZW4pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8gICDpgInmi6kKICAgIHNlbGVjdEF1dGhvcml0eTogZnVuY3Rpb24gc2VsZWN0QXV0aG9yaXR5KCkgewogICAgICB0aGlzLnJvdy5kYXRhQXV0aG9yaXR5SWQgPSB0aGlzLmRhdGFBdXRob3JpdHlJZDsKICAgICAgdGhpcy5uZWVkQ29uZmlybSA9IHRydWU7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgdGhpcy5hdXRob3JpdHlzID0gW107CiAgICB0aGlzLmRhdGFBdXRob3JpdHlJZCA9IFtdOwogICAgdGhpcy5yb3VuZEF1dGhvcml0eSh0aGlzLmF1dGhvcml0eSk7CiAgICB0aGlzLnJvdy5kYXRhQXV0aG9yaXR5SWQgJiYgdGhpcy5yb3cuZGF0YUF1dGhvcml0eUlkLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICB2YXIgb2JqID0gX3RoaXM1LmF1dGhvcml0eXMgJiYgX3RoaXM1LmF1dGhvcml0eXMuZmlsdGVyKGZ1bmN0aW9uIChhdSkgewogICAgICAgIHJldHVybiBhdS5hdXRob3JpdHlJZCA9PT0gaXRlbS5hdXRob3JpdHlJZDsKICAgICAgfSkgJiYgX3RoaXM1LmF1dGhvcml0eXMuZmlsdGVyKGZ1bmN0aW9uIChhdSkgewogICAgICAgIHJldHVybiBhdS5hdXRob3JpdHlJZCA9PT0gaXRlbS5hdXRob3JpdHlJZDsKICAgICAgfSlbMF07CgogICAgICBfdGhpczUuZGF0YUF1dGhvcml0eUlkLnB1c2gob2JqKTsKICAgIH0pOwogIH0KfTs="},{"version":3,"sources":["datas.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n      <div class=\"clearflex\" style=\"margin:18px\">\r\n      <el-button @click=\"authDataEnter\" class=\"fl-right\" size=\"small\" type=\"primary\">确 定</el-button>\r\n      <el-button @click=\"all\" class=\"fl-left\" size=\"small\" type=\"primary\">全选</el-button>\r\n      <el-button @click=\"self\" class=\"fl-left\" size=\"small\" type=\"primary\">本角色</el-button>\r\n      <el-button @click=\"selfAndChildren\" class=\"fl-left\" size=\"small\" type=\"primary\">本角色及子角色</el-button>\r\n    </div>\r\n     <el-checkbox-group v-model=\"dataAuthorityId\" @change=\"selectAuthority\">\r\n        <el-checkbox v-for=\"(item,key) in authoritys\" :label=\"item\" :key=\"key\">{{item.authorityName}}</el-checkbox>\r\n    </el-checkbox-group>\r\n  </div>\r\n</template>\r\n<script>\r\nimport {setDataAuthority} from '@/api/authority'\r\nexport default {\r\n  name: 'Datas',\r\n  data() {\r\n    return {\r\n        authoritys:[],\r\n        dataAuthorityId:[],\r\n        needConfirm:false\r\n    }\r\n  },\r\n  props: {\r\n    row: {\r\n      default: function() {\r\n        return {}\r\n      },\r\n      type: Object\r\n    },\r\n    authority: {\r\n      default: function() {\r\n        return {}\r\n      },\r\n      type: Array\r\n    }\r\n  },\r\n  methods:{\r\n    // 暴露给外层使用的切换拦截统一方法\r\n      enterAndNext(){\r\n        this.authDataEnter()\r\n      },\r\n      all(){\r\n         this.dataAuthorityId = [...this.authoritys]\r\n         this.row.dataAuthorityId = this.dataAuthorityId\r\n         this.needConfirm = true\r\n      },\r\n      self(){\r\n          this.dataAuthorityId = this.authoritys.filter(item=>item.authorityId===this.row.authorityId)\r\n          this.row.dataAuthorityId = this.dataAuthorityId\r\n          this.needConfirm = true\r\n      },\r\n      selfAndChildren(){\r\n         const arrBox = []\r\n         this.getChildrenId(this.row,arrBox)\r\n         this.dataAuthorityId = this.authoritys.filter(item=>arrBox.indexOf(item.authorityId)>-1)\r\n         this.row.dataAuthorityId = this.dataAuthorityId\r\n         this.needConfirm = true\r\n      },\r\n      getChildrenId(row,arrBox){\r\n          arrBox.push(row.authorityId)\r\n          row.children&&row.children.map(item=>{\r\n              this.getChildrenId(item,arrBox)\r\n          })\r\n      },\r\n    // 提交\r\n      async authDataEnter(){\r\n          const res = await setDataAuthority(this.row)\r\n          if(res.code == 0){\r\n              this.$message({ type: 'success', message: \"资源设置成功\" })\r\n          }\r\n      },\r\n    //   平铺角色\r\n      roundAuthority(authoritys){\r\n          authoritys&&authoritys.map(item=>{\r\n              const obj = {}\r\n              obj.authorityId = item.authorityId\r\n              obj.authorityName = item.authorityName\r\n              this.authoritys.push(obj)\r\n              if(item.children&&item.children.length){\r\n                  this.roundAuthority(item.children)\r\n              }\r\n          })\r\n      },\r\n    //   选择\r\n      selectAuthority(){\r\n          this.row.dataAuthorityId = this.dataAuthorityId\r\n          this.needConfirm = true\r\n      }\r\n  },\r\n  created() {\r\n      this.authoritys = []\r\n      this.dataAuthorityId = []\r\n      this.roundAuthority(this.authority)\r\n      this.row.dataAuthorityId&&this.row.dataAuthorityId.map(item=>{\r\n          const obj = this.authoritys&&this.authoritys.filter(au=>au.authorityId === item.authorityId)&&this.authoritys.filter(au=>au.authorityId === item.authorityId)[0]\r\n          this.dataAuthorityId.push(obj)\r\n      })\r\n  }\r\n}\r\n</script>\r\n<style lang=\"less\">\r\n</style>"],"sourceRoot":"src/view/superAdmin/authority/components"}]}